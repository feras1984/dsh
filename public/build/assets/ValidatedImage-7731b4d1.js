import{R as c,j as r,C as d,r as C}from"./app-5a10fe5c.js";import{b,C as S}from"./ValidatedInput-a33a15f3.js";import{F as m}from"./FileService-630d0e90.js";import{C as v}from"./CardMedia-d32790f4.js";import{I as E}from"./Icon-416df542.js";import{B as g}from"./Box-77f1218e.js";import{I as R}from"./Send-a3fa1c41.js";const N={image:"",classes:"",className:"",callback:()=>{},imageChanged:()=>{},inputRef:c.createRef(),error:"",iconClasses:""},I=c.createContext(N),k=({value:e,children:s})=>r.jsx(I.Provider,{value:e,children:s}),u=()=>{const e=c.useContext(I);if(e===void 0)throw new Error("The context must be inside the provider");return e},w=()=>{const{inputRef:e,callback:s}=u(),a=t=>{var o,i;s(((i=(o=t==null?void 0:t.target)==null?void 0:o.files)==null?void 0:i[0])||null)};return r.jsx("input",{type:"file",id:"hidden-input",className:"hidden",ref:e,onChange:a})},B=()=>{d.get(m);const{image:e,classes:s,className:a}=u();return r.jsx(v,{classes:{img:s},component:"img",src:e||"/file/users/default.png",alt:"photo",className:a})},F=()=>{const{inputRef:e,iconClasses:s}=u(),a=()=>{var t;(t=e==null?void 0:e.current)==null||t.click()};return r.jsx(g,{className:`absolute bg-white rounded-full ${s||"right-[16px] bottom-[16px]"}`,children:r.jsx(R,{onClick:a,className:"",children:r.jsx(E,{name:"edit",size:24})})})},L=()=>{const{error:e}=u();return e&&r.jsx(b,{sx:{color:"error.main",marginLeft:"8px",marginRight:"8px",textWrap:"nowrap"},children:e})},y=({image:e,onChange:s,iconClasses:a="",classes:t})=>{const o=d.get(m),[i,x]=c.useState(e),[f,n]=c.useState(""),p=c.useRef(null),h=l=>{l&&(o.assertSize(l)?o.assertImage(l)?(n(""),x(URL.createObjectURL(l)),s(l)):n("Please upload an image!"):n(`Image Size must be less than ${m.MAX_FILE_SIZE}KB!`))},j=()=>{};return r.jsx(k,{value:{image:i,callback:h,imageChanged:j,inputRef:p,error:f,iconClasses:a,classes:t},children:r.jsxs(g,{children:[r.jsxs(g,{className:"relative",children:[r.jsx(B,{}),r.jsx(F,{})]}),r.jsx(w,{}),r.jsx(L,{})]})})},_=({controllerName:e="",methods:s,image:a=null,onUpload:t=null})=>{const o=d.get(m),[i,x]=C.useState(!1);C.useState(!1);const f=n=>{x(!0),s.setValue("image",n),n?s.clearErrors("image"):s.setError("image",{message:"image is required"}),!n&&i?s.setError("image",{message:"Select a valid image"}):(s.clearErrors("image"),t!==null&&t())};return r.jsx(S,{name:e,control:s.control,render:({field:{value:n,onChange:p,onBlur:h,ref:j},fieldState:{error:l}})=>r.jsx(r.Fragment,{children:r.jsx(g,{className:"w-[250px] relative",children:r.jsx(y,{image:a||o.DefaultImage,iconClasses:"right-[16px] bottom-[16px]",classes:"bg-center bg-cover object-cover relative h-[195px] rounded-lg border-2 border-state-500",onChange:f})})})})};export{_ as V};
