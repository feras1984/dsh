import{R as c,j as s,C as f,r as C}from"./app-3222beb4.js";import{b,C as v}from"./ValidatedInput-62819a47.js";import{F as m}from"./FileService-ae0fd4a5.js";import{C as S}from"./CardMedia-b262aa22.js";import{I as E}from"./Icon-22596176.js";import{B as g}from"./Box-baa5e9d6.js";import{I as R}from"./Send-670be0c8.js";const w={image:"",classes:"",className:"",callback:()=>{},imageChanged:()=>{},inputRef:c.createRef(),error:"",iconClasses:""},I=c.createContext(w),N=({value:e,children:r})=>s.jsx(I.Provider,{value:e,children:r}),u=()=>{const e=c.useContext(I);if(e===void 0)throw new Error("The context must be inside the provider");return e},k=()=>{const{inputRef:e,callback:r}=u(),a=t=>{var n,i;r(((i=(n=t==null?void 0:t.target)==null?void 0:n.files)==null?void 0:i[0])||null)};return s.jsx("input",{type:"file",id:"hidden-input",className:"hidden",ref:e,onChange:a})},L=()=>{f.get(m);const{image:e,classes:r,className:a}=u();return(n=>n.toLowerCase().endsWith(".svg"))(e||"")?s.jsx("object",{className:r,data:e||"",type:"image/svg+xml",width:"100%",height:"100%",children:s.jsx("img",{src:e||"",width:"160px",height:"160px",alt:"svg fallback"})}):s.jsx(S,{classes:{img:r},component:"img",image:e||"/file/users/default.png",alt:"photo",className:a})},V=()=>{const{inputRef:e,iconClasses:r}=u(),a=()=>{var t;(t=e==null?void 0:e.current)==null||t.click()};return s.jsx(g,{className:`absolute bg-white rounded-full ${r||"right-[16px] bottom-[16px]"}`,children:s.jsx(R,{onClick:a,className:"",children:s.jsx(E,{name:"edit",size:24})})})},y=()=>{const{error:e}=u();return e&&s.jsx(b,{sx:{color:"error.main",marginLeft:"8px",marginRight:"8px",textWrap:"nowrap"},children:e})},B=({image:e,onChange:r,iconClasses:a="",classes:t})=>{const n=f.get(m),[i,x]=c.useState(e),[d,o]=c.useState(""),p=c.useRef(null),h=l=>{l&&(n.assertSize(l)?n.assertImage(l)?(o(""),x(URL.createObjectURL(l)),r(l)):o("Please upload an image!"):o(`Image Size must be less than ${m.MAX_FILE_SIZE}KB!`))},j=()=>{};return s.jsx(N,{value:{image:i,callback:h,imageChanged:j,inputRef:p,error:d,iconClasses:a,classes:t},children:s.jsxs(g,{children:[s.jsxs(g,{className:"relative",children:[s.jsx(L,{}),s.jsx(V,{})]}),s.jsx(k,{}),s.jsx(y,{})]})})},T=({controllerName:e="",methods:r,image:a=null,onUpload:t=null})=>{const n=f.get(m),[i,x]=C.useState(!1);C.useState(!1);const d=o=>{x(!0),r.setValue("image",o),o?r.clearErrors("image"):r.setError("image",{message:"image is required"}),!o&&i?r.setError("image",{message:"Select a valid image"}):(r.clearErrors("image"),t!==null&&t())};return s.jsx(v,{name:e,control:r.control,render:({field:{value:o,onChange:p,onBlur:h,ref:j},fieldState:{error:l}})=>s.jsx(s.Fragment,{children:s.jsx(g,{className:"w-[250px] relative",children:s.jsx(B,{image:a||n.DefaultImage,iconClasses:"right-[16px] bottom-[16px]",classes:"bg-center bg-cover object-cover relative h-[195px] rounded-lg border-2 border-state-500",onChange:d})})})})};export{T as V};
